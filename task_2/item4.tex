
\subsubsection*{4. Тестовое покрытие}

\begin{itemize}[itemindent=0pt,leftmargin=0em,topsep=0pt,itemsep=-1ex,partopsep=1ex,parsep=1ex]
	\item \textbf{Метрика состояний}

	Пусть будет $k \in \{0, 1, \dots, 32\}$ валидных блоков.

	Для $k$ валидных блоков будет \textbf{C}$^k_A$:

	$$\text{\Large \textbf{C}}^k_A  = \frac{A!}{k!(A-k)!}$$

	Каждый из $k$ валидных блоков может быть заполнен $tag \in \{1,\cdots,33\}$, но без повторений. То есть для первого из валидных блоков (если такой есть) будет 33 варианта тега, для второго (если есть) будет 32 и так далее. Итогово, если $k$ валидных, то комбинаций с тегами будет:

	$$\text{\Large \textbf{A}}^k_{A+1} = \frac{(A+1)!}{(A+1-k)!}$$

	Каждый из этих $k$ валидных блоков имеет возраст $age \in \{1,\cdots,k\}$ -- вариантов распределения возрастов среди этих блоков:

	$$k!$$

	Также, любой валидный блок может быть как модифицирован, так и немодифицирован:

	$$2^k$$

	Итого состояний:

	$$|S| = \sum \limits^{32}_{k = 0} \text{\Large \textbf{C}}^k_A \text{\Large \textbf{A}}^k_{A+1} k! 2^k = \sum \limits^{32}_{k = 0} \frac{A!}{k!(A-k)!} \frac{(A+1)!}{(A+1-k)!} k! 2^k = \sum \limits^{32}_{k = 0} \frac{A!}{(A-k)!} \frac{(A+1)!}{(A+1-k)!} 2^k$$

	$$|S| \approx 6.1 * 10^{107}$$

	{\tiny \[\text{точное значение: }610658749490633920905628536908573609957420537965769233311973133492019439684354198481936553510387047429721121\]}

	В примере было пройдено 33 состояний, тестовое покрытие:
	$$\frac{33}{|S|}\approx 5.4 * 10^{-107}$$

	\item \textbf{Метрика переходов}

	На каждый $fulltag$ в любом состоянии может произойти 3 различных операций с 33 различными тегами, тогда всего переходов будет: $3 * 33 * 6.1 * 10^{107} \approx 1.6 * 10^{110}$. С учётом того что переходов было 32, то тестовое покрытие будет:
	$$\frac{32}{3 * 33 * |S|}\approx 2 * 10^{-109}$$


\end{itemize}